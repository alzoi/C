# Синхронизация потоков  
Атомарный Read/Write регистр - это ячейка памяти, которая поддерживает следующие операции:
write - атомарно записывает значение в регистр;
read - атомарно читает текущее значение из регистра.  
Атомарно означает, что только один поток может выполнять атомарную операцию в данный момен времени. Атомарные операции не делятся между потоками.

Атомарный регистр определяется в шаблоне std::atomic. Каждая специализация шаблона std::atomic определяет атомарный тип. Только объекты атомарных С++ типов могут безопасно использоваться в нескольких потоках одновременно. Когда один поток сохраняет данные в объекте атомарного типа, а другой хочет их прочитать, поведение программы определено стандартом.

```c++
#include <iostream>
#include <string>
#include <atomic>

int main(void) {
  // Определяем атомарный объект типа int с начальным значением 5.
  std::atomic_int obj1(5);
  // Определяем обычные переменные, доступ к которым выполняется не атомарно.
  int var1, var2;
  
  // Атомарно получаем значение, которое хранит атомарный объект obj1.
  var1 = std::atomic_load(&obj1);
  // Не атомарно изменяем значение в переменной var1;
  var1++;
  // Атомарно изменяем значение в атомарном объекте obj1 на значение 8.
  std::atomic_store(&obj1, 8);
  // В переменную var2 атомарно получаем значение, которое хранит атомарный объект obj.
  var2 = std::atomic_load(&obj1);

  std::cout << "var1 = " << var1 << " obj1 = " << var2 << std::endl;
}

/* Результат:

var1 = 6 obj1 = 8

*/
```
